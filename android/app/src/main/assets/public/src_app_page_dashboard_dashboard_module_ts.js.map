{"version":3,"file":"src_app_page_dashboard_dashboard_module_ts.js","mappings":"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","sources":["./src/app/page/dashboard/dashboard-routing.module.ts","./src/app/page/dashboard/dashboard.module.ts","./src/app/page/dashboard/dashboard.page.ts","./src/app/page/dashboard/dashboard.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DashboardPage } from './dashboard.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DashboardPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DashboardPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DashboardPageRoutingModule } from './dashboard-routing.module';\r\n\r\nimport { DashboardPage } from './dashboard.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DashboardPageRoutingModule\r\n  ],\r\n  declarations: [DashboardPage]\r\n})\r\nexport class DashboardPageModule {}\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AutenticacionService } from 'src/app/service/autenticacion/autenticacion.service';\r\nimport { SupabaseService } from 'src/app/service/supabase/supabase.service';\r\nimport { Usuario } from 'src/app/models/usuario';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.page.html',\r\n  styleUrls: ['./dashboard.page.scss'],\r\n})\r\nexport class DashboardPage implements OnInit, OnDestroy {\r\n  usuario: Usuario | null = null;\r\n  private userSubscription: Subscription | undefined;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _authService: AutenticacionService,\r\n    private _supabaseService: SupabaseService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    // Suscribirse al usuario actual para actualizaciones en tiempo real\r\n    this._authService.obtenerUsuarioActual().subscribe(usuario => {\r\n      this.usuario = usuario; // Actualiza el usuario en el dashboard\r\n    });\r\n\r\n    // Cargar el usuario al inicio\r\n    this.cargarUsuario();\r\n  }\r\n\r\n  cargarUsuario() {\r\n    this._authService.obtenerRutUsuario().subscribe(rut => {\r\n      if (rut) {\r\n        this._supabaseService.getUsuarioByRut(+rut).subscribe(response => {\r\n          this.usuario = response[0];\r\n        }, error => {\r\n          console.error('Error al cargar el usuario:', error);\r\n          this.router.navigate(['/login']);\r\n        });\r\n      } else {\r\n        this.router.navigate(['/login']);\r\n      }\r\n    });\r\n  }\r\n\r\n  navegarAEditarPerfil() {\r\n    this.router.navigate(['/editar-perfil']);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // Cancelar suscripciones para evitar fugas de memoria\r\n    if (this.userSubscription) {\r\n      this.userSubscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-menu-button></ion-menu-button>\r\n    </ion-buttons>\r\n    <ion-title>FindCar</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <ion-avatar class=\"perfil\">\r\n    <img alt=\"Silhouette of a person's head\" src=\"https://ionicframework.com/docs/img/demos/avatar.svg\" />\r\n  </ion-avatar>\r\n  <div class=\"form-container\">\r\n    <ion-item>\r\n      <ion-text>Nombre :</ion-text>\r\n      <strong>{{ usuario?.nombre }}</strong>\r\n    </ion-item>\r\n    <br>\r\n\r\n    <ion-item>\r\n      <ion-text>RUT :</ion-text>\r\n      <strong>{{ usuario?.rut }}-{{ usuario?.dv }}</strong>\r\n    </ion-item>\r\n    <br>\r\n\r\n    <ion-item>\r\n      <ion-text>Email :</ion-text>\r\n      <strong>{{ usuario?.correo }}</strong>\r\n    </ion-item>\r\n    <br>\r\n\r\n    <ion-item>\r\n      <ion-text>Fecha de nacimiento :</ion-text>\r\n      <strong>{{ usuario?.fecha_nacimiento }}</strong>\r\n    </ion-item>\r\n    <br>\r\n\r\n      <ion-button expand=\"full\" shape=\"round\" (click)=\"navegarAEditarPerfil()\">\r\n        Editar Perfil\r\n      </ion-button>\r\n\r\n  </div>\r\n</ion-content>\r\n"],"names":["RouterModule","DashboardPage","routes","path","component","DashboardPageRoutingModule","forChild","imports","i1","exports","CommonModule","FormsModule","IonicModule","DashboardPageModule","declarations","constructor","router","_authService","_supabaseService","usuario","ngOnInit","obtenerUsuarioActual","subscribe","cargarUsuario","obtenerRutUsuario","rut","getUsuarioByRut","response","error","console","navigate","navegarAEditarPerfil","ngOnDestroy","userSubscription","unsubscribe","i0","ɵɵdirectiveInject","Router","i2","AutenticacionService","i3","SupabaseService","selectors","decls","vars","consts","template","DashboardPage_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","DashboardPage_Template_ion_button_click_34_listener","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate","nombre","ɵɵtextInterpolate2","dv","correo","fecha_nacimiento"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}