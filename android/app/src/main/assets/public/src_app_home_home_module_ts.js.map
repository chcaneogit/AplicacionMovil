{"version":3,"file":"src_app_home_home_module_ts.js","mappings":"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","sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts","./src/app/home/home.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HomePage } from './home.page';\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule\r\n  ],\r\n  declarations: [HomePage],\r\n})\r\nexport class HomePageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { SupabaseService } from 'src/app/service/supabase/supabase.service';\r\nimport { AlertController, LoadingController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { AutenticacionService } from '../service/autenticacion/autenticacion.service';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.page.html',\r\n  styleUrls: ['./home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit {\r\n  reportes: any[] = [];\r\n\r\n  constructor(\r\n    private supabaseService: SupabaseService,\r\n    private autenticacionService: AutenticacionService,\r\n    private alertController: AlertController,\r\n    private router: Router,\r\n    private loadingController: LoadingController\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.cargarReportes();\r\n  }\r\n\r\n  async cargarReportes() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Cargando reportes...',\r\n      spinner: 'crescent', // Estilo del cargador\r\n    });\r\n    await loading.present(); // Muestra el cargador\r\n\r\n    this.supabaseService.getReportes().subscribe({\r\n      next: (response) => {\r\n        if (response.body) {\r\n          this.reportes = response.body;\r\n          console.log('Reportes obtenidos:', this.reportes);\r\n        }\r\n      },\r\n      error: (err) => {\r\n        console.error('Error al obtener reportes:', err);\r\n      },\r\n      complete: () => {\r\n        loading.dismiss(); // Oculta el cargador cuando los reportes se cargan\r\n      },\r\n    });\r\n  }\r\n\r\n  doRefresh(event: any) {\r\n    console.log('Actualizando reportes...');\r\n\r\n    // Muestra el cargador mientras se actualizan los reportes\r\n    this.cargarReportes();\r\n\r\n    // Finalizar el refresher\r\n    event.target.complete();\r\n  }\r\n\r\n  async verificarReportes(reporte: any) {\r\n    if (!this.autenticacionService.estaAutenticado()) {\r\n      const alert = await this.alertController.create({\r\n        header: 'Acceso Denegado',\r\n        message: 'Debe iniciar sesión para poder ver la ubicación.',\r\n        buttons: ['OK'],\r\n      });\r\n      await alert.present();\r\n    } else {\r\n      this.router.navigate(['/ver-ubicacion'], {\r\n        queryParams: {\r\n          ubicacion: reporte.ubicacion,\r\n          modelo: reporte.modelo,\r\n          patente: reporte.patente,\r\n        },\r\n      });\r\n    }\r\n  }\r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-menu-button></ion-menu-button>\r\n    </ion-buttons>\r\n    <ion-title>FindCar</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\r\n    <ion-refresher-content\r\n\r\n      refreshingSpinner=\"bubbles\">\r\n    </ion-refresher-content>\r\n  </ion-refresher>\r\n\r\n  <div class=\"container-1\" *ngFor=\"let reporte of reportes\">\r\n    <h4>Publicado el {{ reporte.fecha_publicacion }}</h4>\r\n    <img *ngIf=\"reporte.foto\" [src]=\"reporte.foto\" alt=\"Foto del reporte\" class=\"responsive-img\">\r\n    <ion-list class=\"home\">\r\n      <ion-item>\r\n        <ion-label>\r\n          <p>Región: {{ reporte.region?.nombre }}</p>\r\n          <p>Tipo de Vehículo: {{ reporte.tipo_vehiculo?.tipo }}</p>\r\n          <p>Marca: {{ reporte.marca?.marca }}</p>\r\n          <p>Modelo: {{ reporte.modelo }}</p>\r\n          <p>Color: {{ reporte.color }}</p>\r\n          <p>Patente: {{ reporte.patente }}</p>\r\n        </ion-label>\r\n      </ion-item>\r\n      <ion-button class=\"ubi\" (click)=\"verificarReportes(reporte)\">Ver ubicación</ion-button>\r\n    </ion-list>\r\n  </div>\r\n</ion-content>\r\n"],"names":["RouterModule","HomePage","routes","path","component","HomePageRoutingModule","forChild","imports","i1","exports","CommonModule","IonicModule","FormsModule","HomePageModule","declarations","i0","ɵɵelement","ɵɵproperty","reporte_r2","foto","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","HomePage_div_9_img_3_Template","ɵɵlistener","HomePage_div_9_Template_ion_button_click_19_listener","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","verificarReportes","ɵɵadvance","ɵɵtextInterpolate1","fecha_publicacion","region","nombre","tipo_vehiculo","tipo","marca","modelo","color","patente","constructor","supabaseService","autenticacionService","alertController","router","loadingController","reportes","ngOnInit","cargarReportes","_this","_asyncToGenerator","loading","create","message","spinner","present","getReportes","subscribe","next","response","body","console","log","error","err","complete","dismiss","doRefresh","event","target","reporte","_this2","estaAutenticado","alert","header","buttons","navigate","queryParams","ubicacion","ɵɵdirectiveInject","SupabaseService","i2","AutenticacionService","i3","AlertController","i4","Router","LoadingController","selectors","decls","vars","consts","template","HomePage_Template","rf","ctx","HomePage_Template_ion_refresher_ionRefresh_7_listener","$event","HomePage_div_9_Template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}