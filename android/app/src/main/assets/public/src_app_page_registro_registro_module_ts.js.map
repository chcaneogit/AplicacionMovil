{"version":3,"file":"src_app_page_registro_registro_module_ts.js","mappings":"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","sources":["./src/app/page/registro/registro-routing.module.ts","./src/app/page/registro/registro.module.ts","./src/app/page/registro/registro.page.ts","./src/app/page/registro/registro.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RegistroPage } from './registro.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegistroPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RegistroPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegistroPageRoutingModule } from './registro-routing.module';\r\n\r\nimport { RegistroPage } from './registro.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RegistroPageRoutingModule\r\n  ],\r\n  declarations: [RegistroPage]\r\n})\r\nexport class RegistroPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Usuario } from 'src/app/models/usuario';\r\nimport { SupabaseService } from 'src/app/service/supabase/supabase.service';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-registro',\r\n  templateUrl: './registro.page.html',\r\n  styleUrls: ['./registro.page.scss'],\r\n})\r\nexport class RegistroPage implements OnInit {\r\n  nuevo_usuario: Usuario = {\r\n    rut: null,\r\n    dv: '',\r\n    nombre: '',\r\n    correo: '',\r\n    password: '',\r\n    fecha_nacimiento: '',\r\n  };\r\n\r\n  constructor(\r\n    private supabaseService: SupabaseService,\r\n    private router: Router,\r\n    private alertController: AlertController\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  registrarUsuario() {\r\n    // Validar campos antes de continuar\r\n    if (!this.validarCampos()) {\r\n      return; // Si la validación falla, salir del método\r\n    }\r\n\r\n    if (this.nuevo_usuario.rut === null) {\r\n      this.presentAlert('Error de validación', 'El RUT es obligatorio.');\r\n      return;\r\n    }\r\n\r\n    // Verificar si el RUT ya existe en la base de datos\r\n    this.supabaseService.getUsuarioByRut(this.nuevo_usuario.rut as number).subscribe({\r\n      next: async (usuarioExistente) => {\r\n        if (usuarioExistente && usuarioExistente.length > 0) {\r\n          await this.presentAlert('Error de registro', 'El RUT ya está registrado en el sistema.');\r\n          return;\r\n        }\r\n\r\n        // Verificar si el correo ya existe en la base de datos\r\n        this.supabaseService.getUsuarioByCorreo(this.nuevo_usuario.correo).subscribe({\r\n          next: async (resultados) => {\r\n            if (resultados && resultados.length > 0) {\r\n              await this.presentAlert('Error de registro', 'El correo ya está registrado en el sistema.');\r\n              return;\r\n            }\r\n\r\n            // Procede con el registro\r\n            this.supabaseService.addUsuario(this.nuevo_usuario).subscribe({\r\n              next: async () => {\r\n                await this.presentAlert('Registro Exitoso', 'Te has registrado exitosamente.', true);\r\n              },\r\n              error: async (error) => {\r\n                console.error('Error al registrar usuario:', error);\r\n                await this.presentAlert('Error al registrar usuario', 'Por favor, intenta nuevamente.');\r\n              }\r\n            });\r\n          },\r\n          error: async (error) => {\r\n            console.error('Error al verificar correo:', error);\r\n            await this.presentAlert('Error al verificar correo', 'Por favor, intenta nuevamente.');\r\n          }\r\n        });\r\n      },\r\n      error: async (error) => {\r\n        console.error('Error al verificar RUT:', error);\r\n        await this.presentAlert('Error al verificar RUT', 'Por favor, intenta nuevamente.');\r\n      }\r\n    });\r\n  }\r\n\r\n  private validarCampos(): boolean {\r\n    if (\r\n      !this.nuevo_usuario.rut ||\r\n      !this.nuevo_usuario.dv ||\r\n      !this.nuevo_usuario.nombre ||\r\n      !this.nuevo_usuario.correo ||\r\n      !this.nuevo_usuario.password ||\r\n      !this.nuevo_usuario.fecha_nacimiento\r\n    ) {\r\n      this.presentAlert('Error de validación', 'Todos los campos son obligatorios');\r\n      return false;\r\n    }\r\n\r\n    const rutPattern = /^[0-9]{7,8}$/;\r\n    if (!rutPattern.test(this.nuevo_usuario.rut?.toString())) {\r\n      this.presentAlert('Error de validación', 'El RUT debe contener 7 u 8 dígitos numéricos');\r\n      return false;\r\n    }\r\n\r\n    const dvPattern = /^[0-9kK]{1}$/;\r\n    if (!dvPattern.test(this.nuevo_usuario.dv)) {\r\n      this.presentAlert('Error de validación', 'El dígito verificador debe ser un número del 0 al 9 o \"K\".');\r\n      return false;\r\n    }\r\n\r\n    if (!this.validarRutConDv(this.nuevo_usuario.rut, this.nuevo_usuario.dv)) {\r\n      this.presentAlert('Error de validación', 'El RUT y el dígito verificador no coinciden.');\r\n      return false;\r\n    }\r\n\r\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailPattern.test(this.nuevo_usuario.correo)) {\r\n      this.presentAlert('Error de validación', 'Por favor, ingresa un correo electrónico válido.');\r\n      return false;\r\n    }\r\n\r\n    if (!this.esMayorDeEdad(this.nuevo_usuario.fecha_nacimiento)) {\r\n      this.presentAlert('Error de validación', 'Debes tener entre 18 y 100 años para registrarte.');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private esMayorDeEdad(fechaNacimiento: string): boolean {\r\n    const fechaNacimientoDate = new Date(fechaNacimiento);\r\n    const fechaActual = new Date();\r\n\r\n    // Validar que la fecha no sea futura\r\n    if (fechaNacimientoDate > fechaActual) {\r\n      this.presentAlert('Error de validación', 'La fecha de nacimiento no puede ser futura.');\r\n      return false;\r\n    }\r\n\r\n    const edad = fechaActual.getFullYear() - fechaNacimientoDate.getFullYear();\r\n\r\n    // Ajuste si el cumpleaños aún no ha ocurrido este año\r\n    if (\r\n      fechaActual.getMonth() < fechaNacimientoDate.getMonth() ||\r\n      (fechaActual.getMonth() === fechaNacimientoDate.getMonth() && fechaActual.getDate() < fechaNacimientoDate.getDate())\r\n    ) {\r\n      return edad - 1 >= 18 && edad - 1 <= 100;\r\n    }\r\n    return edad >= 18 && edad <= 100;\r\n  }\r\n\r\n  private validarRutConDv(rut: number, dv: string): boolean {\r\n    let suma = 0;\r\n    let multiplicador = 2;\r\n    const rutString = rut.toString();\r\n\r\n    for (let i = rutString.length - 1; i >= 0; i--) {\r\n      suma += parseInt(rutString.charAt(i), 10) * multiplicador;\r\n      multiplicador = multiplicador < 7 ? multiplicador + 1 : 2;\r\n    }\r\n\r\n    const residuo = 11 - (suma % 11);\r\n    let dvEsperado;\r\n    if (residuo === 11) {\r\n      dvEsperado = '0';\r\n    } else if (residuo === 10) {\r\n      dvEsperado = 'K';\r\n    } else {\r\n      dvEsperado = residuo.toString();\r\n    }\r\n\r\n    return dvEsperado.toUpperCase() === dv.toUpperCase();\r\n  }\r\n\r\n  private async presentAlert(header: string, message: string, navigateAfter?: boolean) {\r\n    const alert = await this.alertController.create({\r\n      header: header,\r\n      message: message,\r\n      buttons: ['OK'],\r\n    });\r\n\r\n    await alert.present();\r\n\r\n    if (navigateAfter) {\r\n      await alert.onDidDismiss();\r\n      this.router.navigate(['/login']);\r\n    }\r\n  }\r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-menu-button></ion-menu-button>\r\n    </ion-buttons>\r\n    <ion-title>FindCar</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <div class=\"form-container\">\r\n    <h2>Registro</h2>\r\n\r\n    <form (ngSubmit)=\"registrarUsuario()\">\r\n      <ion-item>\r\n        <ion-label>RUT: </ion-label>\r\n        <ion-input\r\n          type=\"text\"\r\n          [(ngModel)]=\"nuevo_usuario.rut\"\r\n          name=\"rut\"\r\n          placeholder=\" Sin puntos ni guión\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-label>Dígito verificador: </ion-label>\r\n        <ion-input\r\n          type=\"text\"\r\n          [(ngModel)]=\"nuevo_usuario.dv\"\r\n          name=\"dv\"\r\n          placeholder=\" Sin guión\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-label>Nombre: </ion-label>\r\n        <ion-input\r\n          type=\"text\"\r\n          [(ngModel)]=\"nuevo_usuario.nombre\"\r\n          name=\"nombre\"\r\n          placeholder=\" Ingrese su nombre\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-label>Correo Electrónico: </ion-label>\r\n        <ion-input\r\n          type=\"email\"\r\n          [(ngModel)]=\"nuevo_usuario.correo\"\r\n          name=\"correo\"\r\n          placeholder=\" Ingrese su correo\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-label>Contraseña: </ion-label>\r\n        <ion-input\r\n          type=\"password\"\r\n          [(ngModel)]=\"nuevo_usuario.password\"\r\n          name=\"password\"\r\n          placeholder=\" Ingrese su contraseña\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-label>Fecha de nacimiento: </ion-label>\r\n        <ion-input\r\n          type=\"date\"\r\n          [(ngModel)]=\"nuevo_usuario.fecha_nacimiento\"\r\n          name=\"fecha_nacimiento\"\r\n          required\r\n        ></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-button expand=\"full\" type=\"submit\">\r\n        Registrarse\r\n      </ion-button>\r\n\r\n    </form>\r\n  </div>\r\n</ion-content>\r\n\r\n\r\n\r\n\r\n"],"names":["RouterModule","RegistroPage","routes","path","component","RegistroPageRoutingModule","forChild","imports","i1","exports","CommonModule","FormsModule","IonicModule","RegistroPageModule","declarations","constructor","supabaseService","router","alertController","nuevo_usuario","rut","dv","nombre","correo","password","fecha_nacimiento","ngOnInit","registrarUsuario","_this","validarCampos","presentAlert","getUsuarioByRut","subscribe","next","_ref","_asyncToGenerator","usuarioExistente","length","getUsuarioByCorreo","_ref2","resultados","addUsuario","_ref3","apply","arguments","error","_ref4","console","_x3","_x2","_ref5","_x4","_x","_ref6","_x5","_this$nuevo_usuario$r","rutPattern","test","toString","dvPattern","validarRutConDv","emailPattern","esMayorDeEdad","fechaNacimiento","fechaNacimientoDate","Date","fechaActual","edad","getFullYear","getMonth","getDate","suma","multiplicador","rutString","i","parseInt","charAt","residuo","dvEsperado","toUpperCase","header","message","navigateAfter","_this2","alert","create","buttons","present","onDidDismiss","navigate","i0","ɵɵdirectiveInject","SupabaseService","i2","Router","i3","AlertController","selectors","decls","vars","consts","template","RegistroPage_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","RegistroPage_Template_form_ngSubmit_10_listener","ɵɵtwoWayListener","RegistroPage_Template_ion_input_ngModelChange_14_listener","$event","ɵɵtwoWayBindingSet","RegistroPage_Template_ion_input_ngModelChange_18_listener","RegistroPage_Template_ion_input_ngModelChange_22_listener","RegistroPage_Template_ion_input_ngModelChange_26_listener","RegistroPage_Template_ion_input_ngModelChange_30_listener","RegistroPage_Template_ion_input_ngModelChange_34_listener","ɵɵproperty","ɵɵadvance","ɵɵtwoWayProperty"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}